<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__c9d844c6ff32111067f6d5054f315fc4">4dd844c62f321110049f2d6df699b6c5</compiled_topic>
        <design_definition>{"type":"FlowTopic","type":"FlowTopic","triggers":[{"type":"Trigger","name":"99b652870dfa402d90eee647b2bada45","triggerType":"request","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"id":"99b652870dfa402d90eee647b2bada45"}],"goals":[{"name":"primary","trigger_id":"99b652870dfa402d90eee647b2bada45","nodes":[{"type":"StartGoal","type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"cebd4b2e1192460db8227d02ada2679b","name":"Start"},{"type":"TerminateGoal","type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"f818b715c9284829acbc2af603f6d354","name":"End"},{"type":"ChoiceInputPrompt","type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"a8b1fcc39c47493386c79c58dadf84f1","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"variable_id":"7cf0c5b791ed473686761c040b1abaa3","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record you like to view ?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"ReferenceChoiceInputPrompt","type":"ReferenceChoiceInputPrompt","mode":"external","id":"12ed3e5ed6d94bca9ec0da88e198eaa0","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"variable_id":"ff767f6676ab46e1a181a8655b4dd042","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Select a NeedIt record to view\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n    /* Write a glide record query, and return the glide record.\n       For example:\n\n       var gr = new GlideRecordSecure(table);\n       gr.addEncodedQuery('active=true^number=INC0010099');\n       gr.query();\n       if(gr.next()) {\n          return gr;\n    }\n    */\n\n      // Initialize an array for the list of NeedIt records to show\n      var options = [];\n  \n      // Query the table selected in the Table field for active records with the \n      // u_request_type selected in the NeedIt Type node where the user is the \n      // u_requested_for. Order the results by the When needed value.\n      var grNI = new GlideRecord(table);\n      grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n      grNI.addQuery('active','true');\n      grNI.addQuery('u_requested_for',vaInputs.user);\n      grNI.orderBy('u_when_needed');\n      grNI.query();\n  \n      // Push a value and label pair to the array for each record the query returns.\n      // The value is the unique value. The label is the number, u_when_needed, and         // short_description values for the NeedIt record.\n      while(grNI.next()) {\n          options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n      }\n  \n      // Return the array\n      return options;\n  \n\n\n})(table)\n","metadataScript":"","cardName":"","cardFields":[],"no_options_found_message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"You have no open NeedIt records.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n    /* Write a glide record query, and return the glide record.\n       For example:\n\n       var gr = new GlideRecordSecure(table);\n       gr.addEncodedQuery('active=true^number=INC0010099');\n       gr.query();\n       if(gr.next()) {\n          return gr;\n    }\n    */\n\n      // Initialize an array for the list of NeedIt records to show\n      var options = [];\n  \n      // Query the table selected in the Table field for active records with the \n      // u_request_type selected in the NeedIt Type node where the user is the \n      // u_requested_for. Order the results by the When needed value.\n      var grNI = new GlideRecord(table);\n      grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n      grNI.addQuery('active','true');\n      grNI.addQuery('u_requested_for',vaInputs.user);\n      grNI.orderBy('u_when_needed');\n      grNI.query();\n  \n      // Push a value and label pair to the array for each record the query returns.\n      // The value is the unique value. The label is the number, u_when_needed, and         // short_description values for the NeedIt record.\n      while(grNI.next()) {\n          options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n      }\n  \n      // Return the array\n      return options;\n  \n\n\n})(table)\n"}},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessageLang(\"hi there {0}\", vaContext.getRequesterLang(), [vaInputs.first_name]);\n       } else {\n           return gs.getMessageLang(\"how are you {0}\", vaContext.getRequesterLang(), [vaInputs.last_name]);\n       }\n    */\n    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n})()\n"}],"id":"28a1b2ffded14d25a1a852ff47928da5","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"RecordOutputPrompt","type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"ff767f6676ab46e1a181a8655b4dd042","fields":["priority","short_description","u_when_needed"],"id":"0cb6a7bfad0647a19c4295115f85baba","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"InputPrompt","type":"InputPrompt","variable_id":"c37fe7649cec4546b310371dec4e3014","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"4d070a6fde364d5280b2a8b0a9b414b8","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Find more NeedIt records ?","branches":[{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"search_again=false"},"id":"9e7dfbaae62d43cb99eeb783f52ff947","name":"No"},{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"search_again=true"},"id":"37b431634da74246bc3c592ffda4cf11","name":"Yes"}],"id":"7cbdeffeff374101907af1794034dfa8","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"108863e223b64b70a923d062d5fa2222","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt Completed ?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"1e536444f8414deb81c4ecb06f44a8b2","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"ff767f6676ab46e1a181a8655b4dd042","id":"fbe9aadf06ee4f5ea421d4ea3a1da246","name":" Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"ff767f6676ab46e1a181a8655b4dd042","fields":["u_when_needed","short_description"],"id":"2aa0a5cb386c4c72b8b5cfda8f2590ae","name":"Updated NeedIt","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"ChoiceInputPrompt","type":"ChoiceInputPrompt","expression_mode":"simple","metadataScript":"","cardName":"","cardFields":[],"id":"35e00b92d8e14f56854e3a96804b25f0","name":"What to update","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"variable_id":"b26298d29e4b43a59e38aa2c5f86fb9e","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"What do you want to update ?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","type":"Decision","name":"Decision","branches":[{"type":"Branch","type":"Branch","label":"When Needed date","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"what_to_update=When needed date"},"id":"aec89fec36b84f279bece2acad0a2a94","name":"When Needed date"},{"type":"Branch","type":"Branch","label":"Nothing","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"what_to_update=Nothing"},"id":"2efc6b761fec4c7f8abcca69eadecba3","name":"Nothing"},{"type":"Branch","type":"Branch","label":"Short Description","expression":{"type":"Applicability","type":"Applicability","mode":"query","value":"what_to_update=Short description"},"id":"d1545d12761f4e608ceb8b0624b868a3","name":"Short Description"}],"id":"d745c533b49c4e4683deabed00c0ed74","goal_id":"primary"},{"type":"InputPrompt","type":"InputPrompt","variable_id":"516cb0c821814af991f89baae765683a","message":{"type":"String","type":"String","mode":"string","value":"gs.getMessageLang(\"Enter new short description\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","type":"Applicability","mode":"script","value":"false"},"id":"600a8794b6734da6b204c6395af003bc","name":"New short description","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"ff767f6676ab46e1a181a8655b4dd042","id":"2ec9928b608d4531bda3e985ca667046","name":"Change short description","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n   vaVars.search_count = vaVars.search_count + 1;\n})()\n","id":"38b94311b62842d2b150f212695daf26","name":"Update search_count","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","type":"Decision","name":"Searched less than 3 times","branches":[{"type":"Branch","type":"Branch","label":"Yes","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaVars.search_count &lt;= 3){\n        return true;\n    }else{\n        return false;\n    }\n})()\n"},"id":"44291ddd4f83453f8dbb7f6774ccbfdb","name":"Yes"},{"type":"Branch","type":"Branch","label":"No","expression":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaVars.search_count &gt; 3){\n       return true;\n    }else{\n        return false;\n    }\n})()\n"},"id":"e0dc9317bd9449acbe331a571e5f850d","name":"No"}],"id":"872702a5c2de44d0a0974b22491e4ff5","goal_id":"primary"},{"type":"TextOutputPrompt","type":"TextOutputPrompt","value":[{"type":"String","type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessageLang(\"hi there {0}\", vaContext.getRequesterLang(), [vaInputs.first_name]);\n       } else {\n           return gs.getMessageLang(\"how are you {0}\", vaContext.getRequesterLang(), [vaInputs.last_name]);\n       }\n    */\n // If Live Chat is available, inform users they will be transfered to a live agent\n      // otherwise, let them know how to work with more NeedIt records\n      if (vaSystem.isLiveAgentAvailable()){\n          return 'You have reached your NeedIt search limit. I will transfer you to a live agent for assistance.'\n      } else {\n          return 'You have reached your NeedIt search limit. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n      }\n})()\n"}],"id":"98a47d866b414f7d8472192d8cec2c6a","name":"Limit Reached","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ScriptedAction","type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaSystem.connectToAgent();\n})()\n","id":"17eab1ba3be64e9ba16c0027ec459b6e","name":"Transfer to target","goal_id":"primary","applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n      if (vaSystem.isLiveAgentAvailable()){\n          return true;\n      } else {\n          return false;\n      }\n})()\n"}}],"edges":[{"type":"Edge","source_node_id":"2ec9928b608d4531bda3e985ca667046","target_node_id":"2aa0a5cb386c4c72b8b5cfda8f2590ae","id":"d6f3b2f53d53417a8b6dd469c57cf717"},{"type":"Edge","source_node_id":"cebd4b2e1192460db8227d02ada2679b","target_node_id":"a8b1fcc39c47493386c79c58dadf84f1","id":"02a7f0344540479d87d73e16b8e69bc2"},{"type":"Edge","source_node_id":"a8b1fcc39c47493386c79c58dadf84f1","target_node_id":"28a1b2ffded14d25a1a852ff47928da5","id":"645e0126e4bb46edbf3a4e516d5b9e93"},{"type":"Edge","source_node_id":"28a1b2ffded14d25a1a852ff47928da5","target_node_id":"12ed3e5ed6d94bca9ec0da88e198eaa0","id":"1ed0c240e2a6458882fa7bd023c4986e"},{"type":"Edge","source_node_id":"12ed3e5ed6d94bca9ec0da88e198eaa0","target_node_id":"0cb6a7bfad0647a19c4295115f85baba","id":"85d030f1e89848afb55be3ff1dd31894"},{"type":"Edge","source_node_id":"4d070a6fde364d5280b2a8b0a9b414b8","target_node_id":"7cbdeffeff374101907af1794034dfa8","id":"e1f6cc09b190446695823f83997740ba"},{"type":"Edge","source_node_id":"7cbdeffeff374101907af1794034dfa8","target_node_id":"f818b715c9284829acbc2af603f6d354","branch_id":"9e7dfbaae62d43cb99eeb783f52ff947","id":"686d70fd5afe42f3b865cbcedc351fdf","name":"9e7dfbaae62d43cb99eeb783f52ff947"},{"type":"Edge","source_node_id":"1e536444f8414deb81c4ecb06f44a8b2","target_node_id":"fbe9aadf06ee4f5ea421d4ea3a1da246","id":"87d83e52171d41b1a61d11dff4fd27a8"},{"type":"Edge","source_node_id":"fbe9aadf06ee4f5ea421d4ea3a1da246","target_node_id":"2aa0a5cb386c4c72b8b5cfda8f2590ae","id":"c18f80627a3a487aba98f8f442b48fb3"},{"type":"Edge","source_node_id":"2aa0a5cb386c4c72b8b5cfda8f2590ae","target_node_id":"4d070a6fde364d5280b2a8b0a9b414b8","id":"f68ef714b5784cca87f57e4347de2666"},{"type":"Edge","source_node_id":"0cb6a7bfad0647a19c4295115f85baba","target_node_id":"35e00b92d8e14f56854e3a96804b25f0","id":"276812e8c0c64bba9996589994b232c7"},{"type":"Edge","source_node_id":"35e00b92d8e14f56854e3a96804b25f0","target_node_id":"d745c533b49c4e4683deabed00c0ed74","id":"3b91e1f24a0e45509618465572cb2ee3"},{"type":"Edge","source_node_id":"d745c533b49c4e4683deabed00c0ed74","target_node_id":"1e536444f8414deb81c4ecb06f44a8b2","branch_id":"aec89fec36b84f279bece2acad0a2a94","id":"c352464046f04f92b3eca6118311421d","name":"aec89fec36b84f279bece2acad0a2a94"},{"type":"Edge","source_node_id":"d745c533b49c4e4683deabed00c0ed74","target_node_id":"4d070a6fde364d5280b2a8b0a9b414b8","branch_id":"2efc6b761fec4c7f8abcca69eadecba3","id":"11b225760bec447a9b07021595a509be","name":"2efc6b761fec4c7f8abcca69eadecba3"},{"type":"Edge","source_node_id":"d745c533b49c4e4683deabed00c0ed74","target_node_id":"600a8794b6734da6b204c6395af003bc","branch_id":"d1545d12761f4e608ceb8b0624b868a3","id":"1687648729184b1d8579bb28359bdeb9","name":"d1545d12761f4e608ceb8b0624b868a3"},{"type":"Edge","source_node_id":"600a8794b6734da6b204c6395af003bc","target_node_id":"2ec9928b608d4531bda3e985ca667046","id":"365d9adae53c4129a4fcf8ebc34f1a46"},{"type":"Edge","source_node_id":"7cbdeffeff374101907af1794034dfa8","target_node_id":"38b94311b62842d2b150f212695daf26","branch_id":"37b431634da74246bc3c592ffda4cf11","id":"530fd3dc56ea4875bbdbfae73595e6df","name":"37b431634da74246bc3c592ffda4cf11"},{"type":"Edge","source_node_id":"38b94311b62842d2b150f212695daf26","target_node_id":"872702a5c2de44d0a0974b22491e4ff5","id":"71f2ddf5f90549489a6d4068b9f5028d"},{"type":"Edge","source_node_id":"872702a5c2de44d0a0974b22491e4ff5","target_node_id":"a8b1fcc39c47493386c79c58dadf84f1","branch_id":"44291ddd4f83453f8dbb7f6774ccbfdb","id":"5136f27122bb445bb94543f1d1eb3373","name":"44291ddd4f83453f8dbb7f6774ccbfdb"},{"type":"Edge","source_node_id":"872702a5c2de44d0a0974b22491e4ff5","target_node_id":"98a47d866b414f7d8472192d8cec2c6a","branch_id":"e0dc9317bd9449acbe331a571e5f850d","id":"6dd98659de1f47c480b33b44ce1d8823","name":"e0dc9317bd9449acbe331a571e5f850d"},{"type":"Edge","source_node_id":"98a47d866b414f7d8472192d8cec2c6a","target_node_id":"17eab1ba3be64e9ba16c0027ec459b6e","id":"08655e914d1f4093bbfe1c45da66bc47"},{"type":"Edge","source_node_id":"17eab1ba3be64e9ba16c0027ec459b6e","target_node_id":"f818b715c9284829acbc2af603f6d354","id":"e08b6ffba2704075b751c0d5f010c00d"}],"id":"primary"}],"script_variables":[{"type":"VariableDto","type":"String","name":"LiveAgent_application","value":{"type":"String","type":"String","mode":"string"},"list":false,"id":"67f4e48d03654e1f9fd70fd402f84aca","formatType":"text","secure":false,"sensitive":false},{"type":"VariableDto","type":"String","name":"search_count","value":{"type":"String","type":"String","mode":"string","value":"0"},"list":false,"id":"74fe4555980d4237bc6403d719058e5b","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","type":"Reference","table":"sys_user","id":"c408130a2b364c8a87693cc3e83eedba","name":"user","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilites","element":"facilites"},{"name":"Human Resources","element":"human Resources"}],"id":"7cf0c5b791ed473686761c040b1abaa3","name":"needit_type","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","type":"Reference","table":"x_58872_needit_needit","id":"ff767f6676ab46e1a181a8655b4dd042","name":"needit_list","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"True/False","type":"True/False","id":"c37fe7649cec4546b310371dec4e3014","name":"search_again","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Date/Time","type":"Date/Time","mode":"date","id":"108863e223b64b70a923d062d5fa2222","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Reference","type":"Reference","table":"","id":"4ed366de39a84b34acc89ffffcd7bff9","name":"_change_when_needed_date","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"Choice","type":"Choice","choices":[{"name":"Short description","element":"Short description"},{"name":"When needed date","element":"When needed date"},{"name":"Nothing","element":"Nothing"}],"id":"b26298d29e4b43a59e38aa2c5f86fb9e","name":"what_to_update","formatType":"text","secure":false,"sensitive":false,"list":false},{"type":"VariableDto","type":"String","name":"new_short_description","list":false,"id":"516cb0c821814af991f89baae765683a","formatType":"Text","validationScript":"","secure":false,"sensitive":false},{"type":"Reference","type":"Reference","table":"","id":"22531ac7962d47e3b24fa5af774aa435","name":"change_short_description","formatType":"text","secure":false,"sensitive":false,"list":false}],"applicability":{"type":"Applicability","type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"f9951d082fb21110049f2d6df699b604","domain":"global","topic_type":"STANDARD","channels":[],"id":"962919252f7a5510049f2d6df699b60c","name":"_PRVW__c9d844c6ff32111067f6d5054f315fc4","key_phrases":["Update NeedIt view in timeoff","Update NeedIt Records 2","Update NeedIt records","NeedIt Request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"autopilot_topic":false,"design_categories":[{"name":null,"visible":false,"sysId":"5c296d4f2f221110049f2d6df699b6bc"}],"triggerable_by_notification":false,"library":false,"readOnly":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>962919252f7a5510049f2d6df699b60c</design_topic_id>
        <graph>{"graph_api_version":"1.0.41","variables":{"67f4e48d03654e1f9fd70fd402f84aca":{"id":"67f4e48d03654e1f9fd70fd402f84aca","name":"LiveAgent_application","value":{"mode":"simple","value":null},"varType":"script","category":"vaVars"},"c408130a2b364c8a87693cc3e83eedba":{"category":"vaInputs","id":"c408130a2b364c8a87693cc3e83eedba","label":"User","name":"user","table":"sys_user","varType":"reference"},"7cf0c5b791ed473686761c040b1abaa3":{"id":"7cf0c5b791ed473686761c040b1abaa3","name":"needit_type","label":"NeedIt Type","varType":"choice","choices":[{"label":"Legal","value":"legal"},{"label":"Facilites","value":"facilites"},{"label":"Human Resources","value":"human Resources","checked":true}],"category":"vaInputs"},"ff767f6676ab46e1a181a8655b4dd042":{"id":"ff767f6676ab46e1a181a8655b4dd042","name":"needit_list","label":"NeedIt List","varType":"reference","table":"x_58872_needit_needit","category":"vaInputs"},"c37fe7649cec4546b310371dec4e3014":{"id":"c37fe7649cec4546b310371dec4e3014","name":"search_again","label":"Search Again","varType":"boolean","secure":false,"category":"vaInputs"},"108863e223b64b70a923d062d5fa2222":{"id":"108863e223b64b70a923d062d5fa2222","name":"new_when_needed_date","label":"New When Needed Date","varType":"date_time","secure":false,"category":"vaInputs","mode":"date"},"4ed366de39a84b34acc89ffffcd7bff9":{"id":"4ed366de39a84b34acc89ffffcd7bff9","name":"_change_when_needed_date","label":" Change When Needed Date","varType":"reference","table":"","inactive":true,"category":"vaInputs"},"b26298d29e4b43a59e38aa2c5f86fb9e":{"id":"b26298d29e4b43a59e38aa2c5f86fb9e","name":"what_to_update","label":"What To Update","varType":"choice","choices":[{"label":"Short description","value":"Short description"},{"label":"When needed date","value":"When needed date"},{"label":"Nothing","value":"Nothing","checked":true}],"category":"vaInputs"},"516cb0c821814af991f89baae765683a":{"id":"516cb0c821814af991f89baae765683a","name":"new_short_description","label":"New Short Description","varType":"string","secure":false,"category":"vaInputs","encryptionHashFunction":"SHA-256","encryptionSalt":{"value":"MTY2NjIwMTkzNzI3NSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"}},"22531ac7962d47e3b24fa5af774aa435":{"id":"22531ac7962d47e3b24fa5af774aa435","name":"change_short_description","label":"Change Short Description","varType":"reference","table":"","inactive":true,"category":"vaInputs"},"74fe4555980d4237bc6403d719058e5b":{"id":"74fe4555980d4237bc6403d719058e5b","value":{"mode":"simple","value":"0"},"name":"search_count","label":"search_count","varType":"script","category":"vaVars"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"","nodes":{"cebd4b2e1192460db8227d02ada2679b":{"id":"cebd4b2e1192460db8227d02ada2679b","stepType":"Start","name":"Start","greetingResponse":{"value":[{"type":"paragraph","children":[{"text":"I can help you find and update NeedIt records for a type of request."}]}],"mode":"simple"}},"f818b715c9284829acbc2af603f6d354":{"id":"f818b715c9284829acbc2af603f6d354","stepType":"TerminateGoal","name":"End","confirmationMessage":{"value":[{"type":"paragraph","children":[{"text":"Ask again when you need to update other NeedIt records."}]}],"mode":"simple"}},"a8b1fcc39c47493386c79c58dadf84f1":{"stepType":"ChoicePrompt","name":"NeedIt Type","prompt":{"value":[{"type":"paragraph","children":[{"text":"Which type of NeedIt record you like to view ? "}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"variableId":"7cf0c5b791ed473686761c040b1abaa3","id":"a8b1fcc39c47493386c79c58dadf84f1","hasCardHeader":false,"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"withNluUserInput":false,"skipIfFulfilled":false},"12ed3e5ed6d94bca9ec0da88e198eaa0":{"stepType":"ReferenceChoicePrompt","name":"NeedIt List","prompt":{"value":[{"type":"paragraph","children":[{"text":"Select a NeedIt record to view"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"variableId":"ff767f6676ab46e1a181a8655b4dd042","id":"12ed3e5ed6d94bca9ec0da88e198eaa0","mode":"glide_record","script":"","metadataScript":"","cardData":{},"noRecordsResponseMsg":{"value":[{"type":"paragraph","children":[{"text":"You have no open NeedIt records."}]}],"mode":"simple"},"condition":{"mode":"glide_scripted_query","value":"(function execute(table) {\n    /* Write a glide record query, and return the glide record.\n       For example:\n\n       var gr = new GlideRecordSecure(table);\n       gr.addEncodedQuery('active=true^number=INC0010099');\n       gr.query();\n       if(gr.next()) {\n          return gr;\n    }\n    */\n\n      // Initialize an array for the list of NeedIt records to show\n      var options = [];\n  \n      // Query the table selected in the Table field for active records with the \n      // u_request_type selected in the NeedIt Type node where the user is the \n      // u_requested_for. Order the results by the When needed value.\n      var grNI = new GlideRecord(table);\n      grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n      grNI.addQuery('active','true');\n      grNI.addQuery('u_requested_for',vaInputs.user);\n      grNI.orderBy('u_when_needed');\n      grNI.query();\n  \n      // Push a value and label pair to the array for each record the query returns.\n      // The value is the unique value. The label is the number, u_when_needed, and         // short_description values for the NeedIt record.\n      while(grNI.next()) {\n          options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n      }\n  \n      // Return the array\n      return options;\n  \n\n\n})(table)\n"},"hasCardHeader":false,"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"withNluUserInput":false,"skipIfFulfilled":false},"28a1b2ffded14d25a1a852ff47928da5":{"id":"28a1b2ffded14d25a1a852ff47928da5","stepType":"TextOutput","name":"Confirm NeedIt Type","secure":false,"value":[{"value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessageLang(\"hi there {0}\", vaContext.getRequesterLang(), [vaInputs.first_name]);\n       } else {\n           return gs.getMessageLang(\"how are you {0}\", vaContext.getRequesterLang(), [vaInputs.last_name]);\n       }\n    */\n    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n})()\n","mode":"script"}],"applicability":{"value":"","mode":"query"}},"0cb6a7bfad0647a19c4295115f85baba":{"id":"0cb6a7bfad0647a19c4295115f85baba","stepType":"RecordOutput","name":"NeedIt Card","variableId":"ff767f6676ab46e1a181a8655b4dd042","cardTemplate":"General","cardFields":{},"mode":"variable","tableName":"x_58872_needit_needit","fields":["priority","short_description","u_when_needed"],"cardDefinition":{"name":"Record","value":"General"},"applicability":{"value":"","mode":"query"},"condition":{"mode":"glide_query","value":""}},"4d070a6fde364d5280b2a8b0a9b414b8":{"id":"4d070a6fde364d5280b2a8b0a9b414b8","stepType":"Prompt","name":"Search Again","prompt":{"value":[{"type":"paragraph","children":[{"text":"Would you like to view another NeedIt Record?"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"c37fe7649cec4546b310371dec4e3014"},"7cbdeffeff374101907af1794034dfa8":{"id":"7cbdeffeff374101907af1794034dfa8","stepType":"Decision","name":"Find more NeedIt records ?"},"1e536444f8414deb81c4ecb06f44a8b2":{"id":"1e536444f8414deb81c4ecb06f44a8b2","stepType":"Prompt","name":"New When Needed Date","prompt":{"value":[{"type":"paragraph","children":[{"text":"When do you need the NeedIt Completed ? "}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"108863e223b64b70a923d062d5fa2222"},"fbe9aadf06ee4f5ea421d4ea3a1da246":{"id":"fbe9aadf06ee4f5ea421d4ea3a1da246","stepType":"CrudAction","name":" Change When Needed Date","template":"u_when_needed={{vaInputs.new_when_needed_date}}","mode":"update","record":"ff767f6676ab46e1a181a8655b4dd042","applicability":{"value":"","mode":"query"},"variableId":"4ed366de39a84b34acc89ffffcd7bff9"},"2aa0a5cb386c4c72b8b5cfda8f2590ae":{"id":"2aa0a5cb386c4c72b8b5cfda8f2590ae","stepType":"RecordOutput","name":"Updated NeedIt","variableId":"ff767f6676ab46e1a181a8655b4dd042","cardTemplate":"General","cardFields":{},"mode":"variable","tableName":"x_58872_needit_needit","fields":["u_when_needed","short_description"],"cardDefinition":{"name":"Record","value":"General"},"applicability":{"value":"","mode":"query"},"condition":{"mode":"glide_query","value":""}},"35e00b92d8e14f56854e3a96804b25f0":{"stepType":"ChoicePrompt","name":"What to update","prompt":{"value":[{"type":"paragraph","children":[{"text":"What do you want to update ? "}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"variableId":"b26298d29e4b43a59e38aa2c5f86fb9e","id":"35e00b92d8e14f56854e3a96804b25f0","hasCardHeader":false,"cardMetadata":{"mode":"card","metadataScript":"","cardTemplate":"","cardFields":{},"cardDefinition":{}},"withNluUserInput":false,"skipIfFulfilled":false},"d745c533b49c4e4683deabed00c0ed74":{"id":"d745c533b49c4e4683deabed00c0ed74","stepType":"Decision","name":"Decision"},"600a8794b6734da6b204c6395af003bc":{"id":"600a8794b6734da6b204c6395af003bc","stepType":"Prompt","name":"New short description","prompt":{"value":[{"type":"paragraph","children":[{"text":"Enter new short description"}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"value":"","mode":"query"},"skippable":{"value":"","mode":"query"},"defaultValue":{"value":"","mode":"simple"},"withNluUserInput":false,"skipIfFulfilled":false,"variableId":"516cb0c821814af991f89baae765683a","inputType":{"format":"Text","script":""}},"2ec9928b608d4531bda3e985ca667046":{"id":"2ec9928b608d4531bda3e985ca667046","stepType":"CrudAction","name":"Change short description","template":"short_description={{vaInputs.new_short_description}}","mode":"update","record":"ff767f6676ab46e1a181a8655b4dd042","applicability":{"value":"","mode":"query"},"variableId":"22531ac7962d47e3b24fa5af774aa435"},"38b94311b62842d2b150f212695daf26":{"id":"38b94311b62842d2b150f212695daf26","name":"Update search_count","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n   vaVars.search_count = vaVars.search_count + 1;\n})()\n","stepType":"ScriptAction","applicability":{"value":"","mode":"query"}},"872702a5c2de44d0a0974b22491e4ff5":{"id":"872702a5c2de44d0a0974b22491e4ff5","stepType":"Decision","name":"Searched less than 3 times"},"98a47d866b414f7d8472192d8cec2c6a":{"id":"98a47d866b414f7d8472192d8cec2c6a","stepType":"TextOutput","name":"Limit Reached","secure":false,"value":[{"value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessageLang(\"hi there {0}\", vaContext.getRequesterLang(), [vaInputs.first_name]);\n       } else {\n           return gs.getMessageLang(\"how are you {0}\", vaContext.getRequesterLang(), [vaInputs.last_name]);\n       }\n    */\n // If Live Chat is available, inform users they will be transfered to a live agent\n      // otherwise, let them know how to work with more NeedIt records\n      if (vaSystem.isLiveAgentAvailable()){\n          return 'You have reached your NeedIt search limit. I will transfer you to a live agent for assistance.'\n      } else {\n          return 'You have reached your NeedIt search limit. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n      }\n})()\n","mode":"script"}],"applicability":{"value":"","mode":"query"}},"17eab1ba3be64e9ba16c0027ec459b6e":{"id":"17eab1ba3be64e9ba16c0027ec459b6e","name":"Transfer to target","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n    vaSystem.connectToAgent();\n})()\n","stepType":"ScriptAction","applicability":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate if the topic or topic node can run\n       and be discoverable (or not).  For example:\n\n       var applicability = vaInputs.first_name == 'Bill' ? true : false;\n       return applicability;\n    */\n      if (vaSystem.isLiveAgentAvailable()){\n          return true;\n      } else {\n          return false;\n      }\n})()\n"}}},"edges":[{"id":"d6f3b2f53d53417a8b6dd469c57cf717","edgeType":"Edge","source":"2ec9928b608d4531bda3e985ca667046","target":"2aa0a5cb386c4c72b8b5cfda8f2590ae","sourcePort":"","targetPort":""},{"id":"02a7f0344540479d87d73e16b8e69bc2","edgeType":"Edge","source":"cebd4b2e1192460db8227d02ada2679b","target":"a8b1fcc39c47493386c79c58dadf84f1","sourcePort":"","targetPort":""},{"id":"645e0126e4bb46edbf3a4e516d5b9e93","edgeType":"Edge","source":"a8b1fcc39c47493386c79c58dadf84f1","target":"28a1b2ffded14d25a1a852ff47928da5","sourcePort":"","targetPort":""},{"id":"1ed0c240e2a6458882fa7bd023c4986e","edgeType":"Edge","source":"28a1b2ffded14d25a1a852ff47928da5","target":"12ed3e5ed6d94bca9ec0da88e198eaa0","sourcePort":"","targetPort":""},{"id":"85d030f1e89848afb55be3ff1dd31894","edgeType":"Edge","source":"12ed3e5ed6d94bca9ec0da88e198eaa0","target":"0cb6a7bfad0647a19c4295115f85baba","sourcePort":"","targetPort":""},{"id":"e1f6cc09b190446695823f83997740ba","edgeType":"Edge","source":"4d070a6fde364d5280b2a8b0a9b414b8","target":"7cbdeffeff374101907af1794034dfa8","sourcePort":"","targetPort":""},{"id":"686d70fd5afe42f3b865cbcedc351fdf","edgeType":"Branch","source":"7cbdeffeff374101907af1794034dfa8","target":"f818b715c9284829acbc2af603f6d354","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.search_again=false","mode":"query"},"label":"No"},{"id":"87d83e52171d41b1a61d11dff4fd27a8","edgeType":"Edge","source":"1e536444f8414deb81c4ecb06f44a8b2","target":"fbe9aadf06ee4f5ea421d4ea3a1da246","sourcePort":"","targetPort":""},{"id":"c18f80627a3a487aba98f8f442b48fb3","edgeType":"Edge","source":"fbe9aadf06ee4f5ea421d4ea3a1da246","target":"2aa0a5cb386c4c72b8b5cfda8f2590ae","sourcePort":"","targetPort":""},{"id":"f68ef714b5784cca87f57e4347de2666","edgeType":"Edge","source":"2aa0a5cb386c4c72b8b5cfda8f2590ae","target":"4d070a6fde364d5280b2a8b0a9b414b8","sourcePort":"","targetPort":""},{"id":"276812e8c0c64bba9996589994b232c7","edgeType":"Edge","source":"0cb6a7bfad0647a19c4295115f85baba","target":"35e00b92d8e14f56854e3a96804b25f0","sourcePort":"","targetPort":""},{"id":"3b91e1f24a0e45509618465572cb2ee3","edgeType":"Edge","source":"35e00b92d8e14f56854e3a96804b25f0","target":"d745c533b49c4e4683deabed00c0ed74","sourcePort":"","targetPort":""},{"id":"c352464046f04f92b3eca6118311421d","edgeType":"Branch","source":"d745c533b49c4e4683deabed00c0ed74","target":"1e536444f8414deb81c4ecb06f44a8b2","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.what_to_update=When needed date","mode":"query"},"label":"When Needed date"},{"id":"11b225760bec447a9b07021595a509be","edgeType":"Branch","source":"d745c533b49c4e4683deabed00c0ed74","target":"4d070a6fde364d5280b2a8b0a9b414b8","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.what_to_update=Nothing","mode":"query"},"label":"Nothing"},{"id":"1687648729184b1d8579bb28359bdeb9","edgeType":"Branch","source":"d745c533b49c4e4683deabed00c0ed74","target":"600a8794b6734da6b204c6395af003bc","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.what_to_update=Short description","mode":"query"},"label":"Short Description"},{"id":"365d9adae53c4129a4fcf8ebc34f1a46","edgeType":"Edge","source":"600a8794b6734da6b204c6395af003bc","target":"2ec9928b608d4531bda3e985ca667046","sourcePort":"","targetPort":""},{"id":"530fd3dc56ea4875bbdbfae73595e6df","edgeType":"Branch","source":"7cbdeffeff374101907af1794034dfa8","target":"38b94311b62842d2b150f212695daf26","sourcePort":"","targetPort":"","expression":{"value":"vaInputs.search_again=true","mode":"query"},"label":"Yes"},{"id":"71f2ddf5f90549489a6d4068b9f5028d","edgeType":"Edge","source":"38b94311b62842d2b150f212695daf26","target":"872702a5c2de44d0a0974b22491e4ff5","sourcePort":"","targetPort":""},{"id":"5136f27122bb445bb94543f1d1eb3373","edgeType":"Branch","source":"872702a5c2de44d0a0974b22491e4ff5","target":"a8b1fcc39c47493386c79c58dadf84f1","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaVars.search_count &lt;= 3){\n        return true;\n    }else{\n        return false;\n    }\n})()\n"},"label":"Yes"},{"id":"6dd98659de1f47c480b33b44ce1d8823","edgeType":"Branch","source":"872702a5c2de44d0a0974b22491e4ff5","target":"98a47d866b414f7d8472192d8cec2c6a","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    if(vaVars.search_count &gt; 3){\n       return true;\n    }else{\n        return false;\n    }\n})()\n"},"label":"No"},{"id":"08655e914d1f4093bbfe1c45da66bc47","edgeType":"Edge","source":"98a47d866b414f7d8472192d8cec2c6a","target":"17eab1ba3be64e9ba16c0027ec459b6e","sourcePort":"","targetPort":""},{"id":"e08b6ffba2704075b751c0d5f010c00d","edgeType":"Edge","source":"17eab1ba3be64e9ba16c0027ec459b6e","target":"f818b715c9284829acbc2af603f6d354","sourcePort":"","targetPort":""}]}}}</graph>
        <name>_PRVW__c9d844c6ff32111067f6d5054f315fc4</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-10-28 14:33:19</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>49d844c62f321110049f2d6df699b6c8</sys_id>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="Timeoff management system" source="x_910737_timeoff_m">f9951d082fb21110049f2d6df699b604</sys_package>
        <sys_policy/>
        <sys_scope display_value="Timeoff management system">f9951d082fb21110049f2d6df699b604</sys_scope>
        <sys_update_name>sys_cb_design_topic_49d844c62f321110049f2d6df699b6c8</sys_update_name>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
